<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="ltd.newbee.mall.newbeemall.dao.QuestionsAndAnswersMapper">
	<!--dao层mapper，java文件名 -->

	<select id="getQuestionsAndAnswers"
		resultType="ltd.newbee.mall.newbeemall.entity.QuestionsAndAnswers">
		<!--id是mapper的方法名，resultType是指定的返回类型 -->
        SELECT *
		FROM questions_and_answers AS q
			LEFT JOIN (
		        SELECT COUNT(*) AS count,like_id
				FROM sku_review_like
				GROUP BY like_id) 
		        AS l
			ON q.id = l.like_id
		WHERE q.goods_id=#{goodsId}
        order by ${orderBy} 
        limit #{start},3;

	</select>

	<select id="getAllQuestions" resultType="java.lang.Integer">
		<!--id是mapper的方法名，resultType是指定的返回类型 -->
		select question,question_date,answer,answer_date,id
		from questions_and_answers
		where goods_id=#{goodsId}

	</select>

	<!--qa中插入数据 -->
	<insert id="insertQAList">
		INSERT INTO questions_and_answers
		(goods_id,question,question_date,great)
		VALUES
		(#{goodsId}, #{question},
		#{questionDate}, #{great})
	</insert>

  

</mapper>

